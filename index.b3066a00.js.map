{"mappings":"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","sources":["src/index.js","src/js/loader.js"],"sourcesContent":["import PixabayApiService from './js/pixabay-api';\nimport galleryMarkup from './js/gallery-markup';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { maskEl, onWindowLoad, loaderShow, loaderHide } from './js/loader';\n\nconst pixabayApiService = new PixabayApiService();\nconst { formEl, galleryEl, loadMoreBtnEl } = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  loadMoreBtnEl: document.querySelector('.load-more'),\n};\n\nformEl.addEventListener('submit', onSubmitForm);\nloadMoreBtnEl.addEventListener('click', showMoreImg);\n\nasync function onSubmitForm(evt) {\n  try {\n    evt.preventDefault();\n    const showLoader = await loaderShow();\n    pixabayApiService.query =\n      evt.currentTarget.elements.searchQuery.value.trim();\n    if (pixabayApiService.query === '') {\n      return;\n    }\n    const resetPage = await pixabayApiService.resetPage();\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const removeGalleryMarkup = await removeGallery();\n    const response = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    const pictures = await response.data.hits;\n    const totalPictures = await response.data.totalHits;\n    Notify.info(`Hooray! We found ${totalPictures} images.`);\n    if (pictures.length === 0) {\n      return Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n    if (pictures.length < 39) {\n      const removeLoadBtn = await removeLoadMoreBtn();\n    } else {\n      const showLoadMoreBtn = await addLoadMoreBtn();\n    }\n    const markup = await galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await startSmoothScroll();\n    const hideLoader = await loaderHide();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function showMoreImg() {\n  try {\n    const showLoader = await loaderShow();\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const response = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    const pictures = await response.data.hits;\n    const markup = await galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await loadMoreSmoothScroll();\n    const showLoadMoreBtn = await addLoadMoreBtn();\n    const hideLoader = await loaderHide();\n    if (pictures.length < 39) {\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      const removeLoadBtn = await removeLoadMoreBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function createGallery(markup) {\n  const createMarkup = await galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  let gallery = new SimpleLightbox('.gallery a');\n  gallery.on('show.simplelightbox');\n}\n\nasync function removeGallery() {\n  const remove = await (galleryEl.innerHTML = '');\n  return remove;\n}\n\nasync function addLoadMoreBtn() {\n  const showBtn = await loadMoreBtnEl.classList.add('show');\n  return showBtn;\n}\n\nasync function removeLoadMoreBtn() {\n  const removeBtn = await loadMoreBtnEl.classList.remove('show');\n  return removeBtn;\n}\n\nasync function startSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('body')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n  });\n}\n\nasync function loadMoreSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","export const maskEl = document.querySelector('.mask');\n\nwindow.addEventListener('DOMContentLoaded', onWindowLoad);\n\nexport function onWindowLoad() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 700);\n}\n\nexport function loaderShow() {\n  maskEl.classList.remove('hide');\n}\n\nexport function loaderHide() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 700);\n}\n"],"names":["$bpxeT","parcelRequire","$03da642c15b09e5e$export$1cd6975ec0fe7e3d","document","querySelector","$03da642c15b09e5e$export$6081e058ace41f01","classList","remove","$03da642c15b09e5e$export$32d8c2fefe41ee6c","setTimeout","add","window","addEventListener","$b8f9b7833fa37166$var$pixabayApiService","$8H72y","default","$b8f9b7833fa37166$var$ref","formEl","galleryEl","loadMoreBtnEl","$b8f9b7833fa37166$var$galleryEl","$b8f9b7833fa37166$var$loadMoreBtnEl","$b8f9b7833fa37166$var$_onSubmitForm","$parcel$interopDefault","$2TvXO","mark","_callee","evt","response","pictures","totalPictures","markup","preventDefault","_ctx","sent","query","currentTarget","elements","searchQuery","value","trim","resetPage","$b8f9b7833fa37166$var$removeLoadMoreBtn","$b8f9b7833fa37166$var$removeGallery","getPictures","data","hits","totalHits","$h6c0i","Notify","info","concat","length","failure","$b8f9b7833fa37166$var$addLoadMoreBtn","$3PHHA","$b8f9b7833fa37166$var$createGallery","$b8f9b7833fa37166$var$startSmoothScroll","console","log","t0","apply","this","arguments","$b8f9b7833fa37166$var$_showMoreImg","$b8f9b7833fa37166$var$loadMoreSmoothScroll","warning","$b8f9b7833fa37166$var$_createGallery","insertAdjacentHTML","$5IjG7","on","$b8f9b7833fa37166$var$_removeGallery","innerHTML","$b8f9b7833fa37166$var$_addLoadMoreBtn","showBtn","$b8f9b7833fa37166$var$_removeLoadMoreBtn","removeBtn","$b8f9b7833fa37166$var$_startSmoothScroll","ref1","cardHeight","firstElementChild","getBoundingClientRect","height","scrollBy","top","behavior","$b8f9b7833fa37166$var$_loadMoreSmoothScroll","ref2"],"version":3,"file":"index.b3066a00.js.map"}