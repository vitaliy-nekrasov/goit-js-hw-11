{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAoB,IAAI,EAAAF,EAAAG,UACxBC,OAAEC,EAAMC,UAAEC,EAASC,cAAEC,GAAkB,CAC3CL,OAAQM,SAASC,cAAc,gBAC/BL,UAAWI,SAASC,cAAc,YAClCH,cAAeE,SAASC,cAAc,eAuDxCC,eAAeC,EAAcC,SACAP,EAAUQ,mBAAmB,YAAaD,GAEvD,IAAIE,EAAAC,GAAJ,CAAmB,cACzBC,GAAG,sB,CAQbN,eAAeO,IAEb,aADsBV,EAAcW,UAAUC,IAAI,O,CAIpDT,eAAeU,IAEb,aADwBb,EAAcW,UAAUG,OAAO,O,CAtEzDlB,EAAOmB,iBAAiB,UAGxBZ,eAA4Ba,GAC1B,IACEA,EAAIC,iBACJxB,EAAkByB,MAAQF,EAAIG,cAAcC,SAASC,YAAYC,YACzC7B,EAAkB8B,kBACdV,UAmDhCV,iBAEE,aADsBL,EAAU0B,UAAY,G,CAnDRC,GAFlC,MAGMC,QAAiBjC,EAAkBkC,YACvClC,EAAkByB,OAEpB,GAAwB,IAApBQ,EAASE,OACX,OAAOC,EAAAC,OAAOC,QACZ,4EAGJ,MAAMC,QAAsBvC,EAAkBwC,UAC5CxC,EAAkByB,OAEpBW,EAAAC,OAAOI,KAAK,oBAAoBF,aAChC,MAAM3B,QAAeZ,EAAkB0C,cAAcT,SAC/BtB,EAAcC,SAmDxCF,iBACE,MAAQiC,OAAQC,GAAepC,SAC5BC,cAAc,QACdoC,kBAAkBC,8BAEAC,OAAOC,SAAS,CACnCC,IAAKL,EACLM,SAAU,U,CAzDWC,SACSlC,G,CAC9B,MAAOmC,GACPC,QAAQC,IAAIF,E,KA1BhB7C,EAAce,iBAAiB,SA8B/BZ,iBACE,UAC8BU,IAA5B,MACMa,QAAiBjC,EAAkBkC,YACvClC,EAAkByB,OAEdb,QAAeZ,EAAkB0C,cAAcT,SAC/BtB,EAAcC,SA+CxCF,iBACE,MAAQiC,OAAQC,GAAepC,SAC5BC,cAAc,YACdoC,kBAAkBC,8BAEAC,OAAOC,SAAS,CACnCC,IAAkB,EAAbL,EACLM,SAAU,U,CArDWK,SACStC,IAC9B,GAAIgB,EAASE,OAAS,GAAI,CACxBC,EAAAC,OAAOmB,QACL,oEAE0BpC,G,EAE9B,MAAOgC,GACPC,QAAQC,IAAIF,E","sources":["src/index.js"],"sourcesContent":["import PixabayApiService from './js/pixabay-api';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst pixabayApiService = new PixabayApiService();\nconst { formEl, galleryEl, loadMoreBtnEl } = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  loadMoreBtnEl: document.querySelector('.load-more'),\n};\n\nformEl.addEventListener('submit', onSubmitForm);\nloadMoreBtnEl.addEventListener('click', showMoreImg);\n\nasync function onSubmitForm(evt) {\n  try {\n    evt.preventDefault();\n    pixabayApiService.query = evt.currentTarget.elements.searchQuery.value;\n    const resetPage = await pixabayApiService.resetPage();\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const removeGalleryMarkup = await removeGallery();\n    const pictures = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    if (pictures.length === 0) {\n      return Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n    const totalPictures = await pixabayApiService.totalHits(\n      pixabayApiService.query\n    );\n    Notify.info(`Hooray! We found ${totalPictures} images.`);\n    const markup = await pixabayApiService.galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await startSmoothScroll();\n    const showLoadMoreBtn = await addLoadMoreBtn();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function showMoreImg() {\n  try {\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const pictures = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    const markup = await pixabayApiService.galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await loadMoreSmoothScroll();\n    const showLoadMoreBtn = await addLoadMoreBtn();\n    if (pictures.length < 39) {\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      const removeLoadBtn = await removeLoadMoreBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function createGallery(markup) {\n  const createMarkup = await galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  let gallery = new SimpleLightbox('.gallery a');\n  gallery.on('show.simplelightbox');\n}\n\nasync function removeGallery() {\n  const remove = await (galleryEl.innerHTML = '');\n  return remove;\n}\n\nasync function addLoadMoreBtn() {\n  const showBtn = await loadMoreBtnEl.classList.add('show');\n  return showBtn;\n}\n\nasync function removeLoadMoreBtn() {\n  const removeBtn = await loadMoreBtnEl.classList.remove('show');\n  return removeBtn;\n}\n\nasync function startSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('body')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n  });\n}\n\nasync function loadMoreSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$6fOXY","parcelRequire","$1f0dc3b9307be026$var$pixabayApiService","default","formEl","$1f0dc3b9307be026$var$formEl","galleryEl","$1f0dc3b9307be026$var$galleryEl","loadMoreBtnEl","$1f0dc3b9307be026$var$loadMoreBtnEl","document","querySelector","async","$1f0dc3b9307be026$var$createGallery","markup","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","on","$1f0dc3b9307be026$var$addLoadMoreBtn","classList","add","$1f0dc3b9307be026$var$removeLoadMoreBtn","remove","addEventListener","evt","preventDefault","query","currentTarget","elements","searchQuery","value","resetPage","innerHTML","$1f0dc3b9307be026$var$removeGallery","pictures","getPictures","length","$iQIUW","Notify","failure","totalPictures","totalHits","info","galleryMarkup","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$1f0dc3b9307be026$var$startSmoothScroll","error","console","log","$1f0dc3b9307be026$var$loadMoreSmoothScroll","warning"],"version":3,"file":"index.74fdfa22.js.map"}