{"mappings":"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","sources":["src/index.js"],"sourcesContent":["import PixabayApiService from './js/pixabay-api';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst pixabayApiService = new PixabayApiService();\nconst { formEl, galleryEl, loadMoreBtnEl } = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  loadMoreBtnEl: document.querySelector('.load-more'),\n};\n\nformEl.addEventListener('submit', onSubmitForm);\nloadMoreBtnEl.addEventListener('click', showMoreImg);\n\nasync function onSubmitForm(evt) {\n  try {\n    evt.preventDefault();\n    pixabayApiService.query = evt.currentTarget.elements.searchQuery.value;\n    const resetPage = await pixabayApiService.resetPage();\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const removeGalleryMarkup = await removeGallery();\n    const pictures = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    if (pictures.length === 0) {\n      return Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n    const totalPictures = await pixabayApiService.totalHits(\n      pixabayApiService.query\n    );\n    Notify.info(`Hooray! We found ${totalPictures} images.`);\n    const markup = await pixabayApiService.galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await startSmoothScroll();\n    const showLoadMoreBtn = await addLoadMoreBtn();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function showMoreImg() {\n  try {\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const pictures = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    const markup = await pixabayApiService.galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await loadMoreSmoothScroll();\n    const showLoadMoreBtn = await addLoadMoreBtn();\n    if (pictures.length < 39) {\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      const removeLoadBtn = await removeLoadMoreBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function createGallery(markup) {\n  const createMarkup = await galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  let gallery = new SimpleLightbox('.gallery a');\n  gallery.on('show.simplelightbox');\n}\n\nasync function removeGallery() {\n  const remove = await (galleryEl.innerHTML = '');\n  return remove;\n}\n\nasync function addLoadMoreBtn() {\n  const showBtn = await loadMoreBtnEl.classList.add('show');\n  return showBtn;\n}\n\nasync function removeLoadMoreBtn() {\n  const removeBtn = await loadMoreBtnEl.classList.remove('show');\n  return removeBtn;\n}\n\nasync function startSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('body')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n  });\n}\n\nasync function loadMoreSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$pixabayApiService","$8H72y","default","$b8f9b7833fa37166$var$ref","formEl","document","querySelector","galleryEl","loadMoreBtnEl","$b8f9b7833fa37166$var$galleryEl","$b8f9b7833fa37166$var$loadMoreBtnEl","$b8f9b7833fa37166$var$_onSubmitForm","$parcel$interopDefault","$2TvXO","mark","_callee","evt","pictures","totalPictures","markup","preventDefault","query","currentTarget","elements","searchQuery","value","resetPage","_ctx","sent","$b8f9b7833fa37166$var$removeLoadMoreBtn","$b8f9b7833fa37166$var$removeGallery","getPictures","length","$h6c0i","Notify","failure","totalHits","info","concat","galleryMarkup","$b8f9b7833fa37166$var$createGallery","$b8f9b7833fa37166$var$startSmoothScroll","$b8f9b7833fa37166$var$addLoadMoreBtn","console","log","t0","apply","this","arguments","$b8f9b7833fa37166$var$_showMoreImg","$b8f9b7833fa37166$var$loadMoreSmoothScroll","warning","$b8f9b7833fa37166$var$_createGallery","insertAdjacentHTML","$5IjG7","on","$b8f9b7833fa37166$var$_removeGallery","remove","innerHTML","$b8f9b7833fa37166$var$_addLoadMoreBtn","showBtn","classList","add","$b8f9b7833fa37166$var$_removeLoadMoreBtn","removeBtn","$b8f9b7833fa37166$var$_startSmoothScroll","ref1","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","$b8f9b7833fa37166$var$_loadMoreSmoothScroll","ref2","addEventListener"],"version":3,"file":"index.15800caa.js.map"}