function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequired7c6=r);var i=r("6fOXY"),o=r("iF2Nc"),s=r("iQIUW"),c=r("fZKcF");const l=new(0,i.default),{formEl:u,galleryEl:d}={formEl:document.querySelector(".search-form"),galleryEl:document.querySelector(".gallery")};let f=!0;async function y(t){await d.insertAdjacentHTML("beforeend",t);new(e(c))(".gallery a").on("show.simplelightbox")}async function w(e){g.observe(e)}u.addEventListener("submit",(async function(e){try{e.preventDefault();await m();if(l.query=e.currentTarget.elements.searchQuery.value.trim(),""===l.query)return;await l.resetPage(),await async function(){return await(d.innerHTML="")}();const t=await l.getPictures(l.query),a=await t.data.hits,n=await t.data.totalHits;if(s.Notify.info(`Hooray! We found ${n} images.`),0===a.length)return s.Notify.failure("Sorry, there are no images matching your search query. Please try again.");const r=await(0,o.default)(a),i=(await y(r),await document.querySelector(".img:last-child"));if(f=!0,f){await w(i);f=!1}a.length<39&&g.unobserve(i);await async function(){const{height:e}=document.querySelector("body").firstElementChild.getBoundingClientRect();await window.scrollBy({top:e,behavior:"smooth"})}(),await v()}catch(e){console.log(e)}}));const g=new IntersectionObserver(((e,t)=>{const a=e[0];a.isIntersecting&&(!async function(){try{await m();const e=await l.getPictures(l.query),t=await e.data.hits,a=await(0,o.default)(t),n=(await y(a),await document.querySelector(".img:last-child"));f=!0,await v(),f&&(w(n),f=!1),t.length<39&&(s.Notify.warning("We're sorry, but you've reached the end of search results."),g.unobserve(n))}catch(e){console.log(e)}}(),t.unobserve(a.target))}),{}),h=document.querySelector(".mask");function m(){h.classList.remove("hide")}function v(){h.classList.add("hide")}window.addEventListener("DOMContentLoaded",(function(){h.classList.add("hide")}));
//# sourceMappingURL=infinite-scroll-page.cb56a93d.js.map
