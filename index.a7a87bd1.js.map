{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCCAO,MAAMC,EAASC,SAASC,cAAc,SAUtC,SAASC,IACdH,EAAOI,UAAUC,OAAO,O,CAGnB,SAASC,IACdC,YAAW,KACTP,EAAOI,UAAUI,IAAI,OAAO,GAC3B,I,CAfLC,OAAOC,iBAAiB,oBAEjB,WACLH,YAAW,KACTP,EAAOI,UAAUI,IAAI,OAAO,GAC3B,I,IDAL,MAAMG,EAAoB,IAAI,EAAAb,EAAAc,UACxBC,OAAEC,EAAMC,UAAEC,EAASC,cAAEC,GAAkB,CAC3CL,OAAQZ,SAASC,cAAc,gBAC/Ba,UAAWd,SAASC,cAAc,YAClCe,cAAehB,SAASC,cAAc,eAmExCiB,eAAeC,EAAcC,SACAL,EAAUM,mBAAmB,YAAaD,GAEvD,IAAIE,EAAAC,GAAJ,CAAmB,cACzBC,GAAG,sB,CAQbN,eAAeO,IAEb,aADsBR,EAAcd,UAAUI,IAAI,O,CAIpDW,eAAeQ,IAEb,aADwBT,EAAcd,UAAUC,OAAO,O,CAlFzDS,EAAOJ,iBAAiB,UAGxBS,eAA4BS,GAC1B,IACEA,EAAIC,uBACqB1B,IAGzB,GAFAQ,EAAkBmB,MAChBF,EAAIG,cAAcC,SAASC,YAAYC,MAAMC,OACf,KAA5BxB,EAAkBmB,MACpB,aAEsBnB,EAAkByB,kBACdT,UA0DhCR,iBAEE,aADsBH,EAAUqB,UAAY,G,CA1DRC,GAFlC,MAGMC,QAAiB5B,EAAkB6B,YACvC7B,EAAkBmB,OAEdW,QAAiBF,EAASG,KAAKC,KAC/BC,QAAsBL,EAASG,KAAKG,UAE1C,GADAC,EAAAC,OAAOC,KAAK,oBAAoBJ,aACR,IAApBH,EAASQ,OACX,OAAOH,EAAAC,OAAOG,QACZ,4EAGJ,GAAIT,EAASQ,OAAS,GAAI,OACItB,G,KACvB,OACyBD,G,CAEhC,MAAML,QAAe,EAAA8B,EAAAvC,SAAc6B,SACbrB,EAAcC,SAsDxCF,iBACE,MAAQiC,OAAQC,GAAepD,SAC5BC,cAAc,QACdoD,kBAAkBC,8BAEA9C,OAAO+C,SAAS,CACnCC,IAAKJ,EACLK,SAAU,U,CA5DWC,SACIrD,G,CACzB,MAAOsD,GACPC,QAAQC,IAAIF,E,KAnChB1C,EAAcR,iBAAiB,SAuC/BS,iBACE,UAC2BhB,UACGwB,IAD5B,MAEMY,QAAiB5B,EAAkB6B,YACvC7B,EAAkBmB,OAEdW,QAAiBF,EAASG,KAAKC,KAC/BtB,QAAe,EAAA8B,EAAAvC,SAAc6B,SACbrB,EAAcC,SAgDxCF,iBACE,MAAQiC,OAAQC,GAAepD,SAC5BC,cAAc,YACdoD,kBAAkBC,8BAEA9C,OAAO+C,SAAS,CACnCC,IAAkB,EAAbJ,EACLK,SAAU,U,CAtDWK,SACSrC,UACLpB,IACzB,GAAImC,EAASQ,OAAS,GAAI,CACxBH,EAAAC,OAAOiB,QACL,oEAE0BrC,G,EAE9B,MAAOiC,GACPC,QAAQC,IAAIF,E","sources":["src/index.js","src/js/loader.js"],"sourcesContent":["import PixabayApiService from './js/pixabay-api';\nimport galleryMarkup from './js/gallery-markup';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { maskEl, onWindowLoad, loaderShow, loaderHide } from './js/loader';\n\nconst pixabayApiService = new PixabayApiService();\nconst { formEl, galleryEl, loadMoreBtnEl } = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  loadMoreBtnEl: document.querySelector('.load-more'),\n};\n\nformEl.addEventListener('submit', onSubmitForm);\nloadMoreBtnEl.addEventListener('click', showMoreImg);\n\nasync function onSubmitForm(evt) {\n  try {\n    evt.preventDefault();\n    const showLoader = await loaderShow();\n    pixabayApiService.query =\n      evt.currentTarget.elements.searchQuery.value.trim();\n    if (pixabayApiService.query === '') {\n      return;\n    }\n    const resetPage = await pixabayApiService.resetPage();\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const removeGalleryMarkup = await removeGallery();\n    const response = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    const pictures = await response.data.hits;\n    const totalPictures = await response.data.totalHits;\n    Notify.info(`Hooray! We found ${totalPictures} images.`);\n    if (pictures.length === 0) {\n      return Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n    if (pictures.length < 39) {\n      const removeLoadBtn = await removeLoadMoreBtn();\n    } else {\n      const showLoadMoreBtn = await addLoadMoreBtn();\n    }\n    const markup = await galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await startSmoothScroll();\n    const hideLoader = await loaderHide();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function showMoreImg() {\n  try {\n    const showLoader = await loaderShow();\n    const removeLoadBtn = await removeLoadMoreBtn();\n    const response = await pixabayApiService.getPictures(\n      pixabayApiService.query\n    );\n    const pictures = await response.data.hits;\n    const markup = await galleryMarkup(pictures);\n    const gallery = await createGallery(markup);\n    const scroll = await loadMoreSmoothScroll();\n    const showLoadMoreBtn = await addLoadMoreBtn();\n    const hideLoader = await loaderHide();\n    if (pictures.length < 39) {\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      const removeLoadBtn = await removeLoadMoreBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function createGallery(markup) {\n  const createMarkup = await galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  let gallery = new SimpleLightbox('.gallery a');\n  gallery.on('show.simplelightbox');\n}\n\nasync function removeGallery() {\n  const remove = await (galleryEl.innerHTML = '');\n  return remove;\n}\n\nasync function addLoadMoreBtn() {\n  const showBtn = await loadMoreBtnEl.classList.add('show');\n  return showBtn;\n}\n\nasync function removeLoadMoreBtn() {\n  const removeBtn = await loadMoreBtnEl.classList.remove('show');\n  return removeBtn;\n}\n\nasync function startSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('body')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n  });\n}\n\nasync function loadMoreSmoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  const scroll = await window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","export const maskEl = document.querySelector('.mask');\n\nwindow.addEventListener('DOMContentLoaded', onWindowLoad);\n\nexport function onWindowLoad() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 700);\n}\n\nexport function loaderShow() {\n  maskEl.classList.remove('hide');\n}\n\nexport function loaderHide() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 700);\n}\n"],"names":["$6fOXY","parcelRequire","$bdfcdc80b4c38739$export$1cd6975ec0fe7e3d","document","querySelector","$bdfcdc80b4c38739$export$6081e058ace41f01","classList","remove","$bdfcdc80b4c38739$export$32d8c2fefe41ee6c","setTimeout","add","window","addEventListener","$1f0dc3b9307be026$var$pixabayApiService","default","formEl","$1f0dc3b9307be026$var$formEl","galleryEl","$1f0dc3b9307be026$var$galleryEl","loadMoreBtnEl","$1f0dc3b9307be026$var$loadMoreBtnEl","async","$1f0dc3b9307be026$var$createGallery","markup","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","on","$1f0dc3b9307be026$var$addLoadMoreBtn","$1f0dc3b9307be026$var$removeLoadMoreBtn","evt","preventDefault","query","currentTarget","elements","searchQuery","value","trim","resetPage","innerHTML","$1f0dc3b9307be026$var$removeGallery","response","getPictures","pictures","data","hits","totalPictures","totalHits","$iQIUW","Notify","info","length","failure","$iF2Nc","height","cardHeight","firstElementChild","getBoundingClientRect","scrollBy","top","behavior","$1f0dc3b9307be026$var$startSmoothScroll","error","console","log","$1f0dc3b9307be026$var$loadMoreSmoothScroll","warning"],"version":3,"file":"index.a7a87bd1.js.map"}